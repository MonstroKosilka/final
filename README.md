# Final ‚Äî Full‚Äëstack –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º

## üìå –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**Final** ‚Äî —ç—Ç–æ full‚Äëstack –≤–µ–±‚Äë–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —Å–æ—Å—Ç–æ—è—â–µ–µ –∏–∑:

* **Backend** ‚Äî Go API (HTTP, JSON, structured logs)
* **Frontend** ‚Äî SPA –Ω–∞ Vue.js, –æ—Ç–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ nginx
* **Monitoring stack** ‚Äî Prometheus, Grafana, Loki, Promtail
<img width="1899" height="977" alt="main_page" src="https://github.com/user-attachments/assets/80d43db7-67d1-49f0-bb62-37728cb41d1b" />

---

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     HTTP      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Frontend ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ ‚îÇ  Backend   ‚îÇ
‚îÇ  (Vue)   ‚îÇ               ‚îÇ   (Go)     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚îÇ nginx                       ‚îÇ
     ‚îÇ                             ‚îÇ
     ‚ñº                             ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Grafana  ‚îÇ ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ ‚îÇ Prometheus ‚îÇ
‚îÇ          ‚îÇ ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ ‚îÇ    Loki    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚ñ≤
              ‚îÇ
          Promtail
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
final/
‚îú‚îÄ‚îÄ .github/                      # CI/CD-workflow‚Äô—ã –∏ GitHub-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ backend/                     # –°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å (Go backend)
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile               # –°–±–æ—Ä–∫–∞ backend-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
‚îú‚îÄ‚îÄ frontend/                    # –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å (Vue.js + NGINX)
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile               # –°–±–æ—Ä–∫–∞ frontend-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ default.conf             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ NGINX
‚îú‚îÄ‚îÄ monitoring/                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
‚îÇ   ‚îú‚îÄ‚îÄ prometheus/              # Prometheus ‚Äî —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ prometheus.yml       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Prometheus
‚îÇ   ‚îú‚îÄ‚îÄ loki/                    # Loki ‚Äî –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä –ª–æ–≥–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config.yml           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Loki
‚îÇ   ‚îî‚îÄ‚îÄ promtail/                # Promtail ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ –ª–æ–≥–æ–≤ –≤ Loki
‚îÇ       ‚îî‚îÄ‚îÄ config.yml           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Promtail
‚îú‚îÄ‚îÄ minikube/                    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ Kubernetes-–æ–∫—Ä—É–∂–µ–Ω–∏—è (Minikube)
‚îú‚îÄ‚îÄ infrastructure/              # –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –∫–æ–¥ (–¥–ª—è —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è –≤ Yandex Cloud)
‚îú‚îÄ‚îÄ screenshots/                 # –°–∫—Ä–∏–Ω—à–æ—Ç—ã –∏ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ .gitignore                   # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã Git
‚îú‚îÄ‚îÄ README.md                   # –ì–ª–∞–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ docker-compose.yml          # –û—Å–Ω–æ–≤–Ω–æ–π Compose-—Ñ–∞–π–ª –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
‚îî‚îÄ‚îÄ docker-compose-latest.yml   # –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π Compose-—Ñ–∞–π–ª —Å –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–º–∏ –æ–±—Ä–∞–∑–∞–º–∏
```

---

# ‚öôÔ∏è –ü–†–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–í–µ—Å—å –ø—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ –≤–µ—Ç–∫–µ develop –∏ –≤–µ—Ç–∫–∞—Ö –æ—Ç –Ω–µ—ë.
–í –≤–µ—Ç–∫–µ main –ª–µ–∂–∏—Ç production –≤–µ—Ä—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞

---

# ‚öôÔ∏è CI/CD Workflows

–í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ GitHub Actions workflow'–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ
–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É—é—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —Å–±–æ—Ä–∫—É, –ø—É–±–ª–∏–∫–∞—Ü–∏—é –æ–±—Ä–∞–∑–æ–≤, Helm-—á–∞—Ä—Ç–æ–≤ –∏
–¥–µ–ø–ª–æ–π –≤ Kubernetes, –∞ —Ç–∞–∫–∂–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±–ª–∞—á–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π —á–µ—Ä–µ–∑
Terraform.

------------------------------------------------------------------------

## üß© Terraform --- –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

**–§–∞–π–ª:** `.github/workflows/terraform-action.yml`\
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π Terraform –¥–ª—è –æ–±–ª–∞—á–Ω–æ–π
–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ Yandex Cloud.

### üîπ –ö–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

-   –ü—Ä–∏ **Pull Request –≤ `main`**, –µ—Å–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã —Ñ–∞–π–ª—ã –≤:

        infrastructure/terraform/**

### üîπ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç

#### 1Ô∏è‚É£ `plan`

-   –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Terraform\
-   –ü–æ–¥–∫–ª—é—á–∞–µ—Ç –∫—Ä–µ–¥—ã Yandex Cloud –∏ Object Storage (S3 backend)\
-   –í—ã–ø–æ–ª–Ω—è–µ—Ç `terraform plan`\
-   –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Å–≤–æ–¥–∫—É –∏–∑–º–µ–Ω–µ–Ω–∏–π (add/change/destroy)\
-   –ü—É–±–ª–∏–∫—É–µ—Ç **–ø–æ–¥—Ä–æ–±–Ω—ã–π plan –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ PR**\
-   –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram

#### 2Ô∏è‚É£ `notify_telegram`

-   –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram –æ —Ç–æ–º, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
    –æ–∂–∏–¥–∞—é—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

#### 3Ô∏è‚É£ `apply` (—Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è environment `deploy`)

-   –ü–æ–≤—Ç–æ—Ä–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç Terraform\
-   –í—ã–ø–æ–ª–Ω—è–µ—Ç `terraform apply -auto-approve`\
-   –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –≤ Telegram

üëâ –õ—é–±—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ PR, —Ä–µ–≤—å—é –∏ —Ä—É—á–Ω–æ–µ
–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º.

------------------------------------------------------------------------

## üñ• Backend --- —Å–±–æ—Ä–∫–∞ –∏ –¥–µ–ø–ª–æ–π —Å–µ—Ä–≤–∏—Å–∞

**–§–∞–π–ª:** `.github/workflows/backend-action.yml`\
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —Å–±–æ—Ä–∫–∞ Docker-–æ–±—Ä–∞–∑–∞ backend, –ø—É–±–ª–∏–∫–∞—Ü–∏—è
Helm-—á–∞—Ä—Ç–∞ –∏ –¥–µ–ø–ª–æ–π.

### üîπ –ö–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

  –°–æ–±—ã—Ç–∏–µ   –í–µ—Ç–∫–∞       –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
  --------- ----------- ------------------------------------------
  Push      `develop`   –¢–µ—Å—Ç—ã ‚Üí —Å–±–æ—Ä–∫–∞ ‚Üí –ø—É–±–ª–∏–∫–∞—Ü–∏—è ‚Üí Helm chart
  PR        –≤ `main`    –¢–µ—Å—Ç—ã ‚Üí –æ–∂–∏–¥–∞–Ω–∏–µ —Ä—É—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è

### üîπ –û—Å–Ω–æ–≤–Ω—ã–µ —ç—Ç–∞–ø—ã

#### 1Ô∏è‚É£ `test_backend`

-   –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Go\
-   –ó–∞–ø—É—Å–∫–∞–µ—Ç `go test ./...`

#### 2Ô∏è‚É£ `build_and_push` (push –≤ `develop`)

-   –°–æ–±–∏—Ä–∞–µ—Ç Docker-–æ–±—Ä–∞–∑ backend\
-   –ü—É–±–ª–∏–∫—É–µ—Ç –≤ **GitHub Container Registry (GHCR)**:
    -   `backend:1.0.<run_number>`\
    -   `backend:latest`

#### 3Ô∏è‚É£ `helm_chart`

-   –ü—Ä–æ–≤–µ—Ä—è–µ—Ç Helm chart (`helm lint --strict`)\

-   –ü–∞–∫—É–µ—Ç chart —Å –≤–µ—Ä—Å–∏–µ–π –æ–±—Ä–∞–∑–∞\

-   –ü—É–±–ª–∏–∫—É–µ—Ç chart –≤ GHCR –∫–∞–∫ OCI-–∞—Ä—Ç–µ—Ñ–∞–∫—Ç:

        ghcr.io/<owner>/helm/backend

#### 4Ô∏è‚É£ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –≤–µ—Ä—Å–∏–µ–π backend.

### üöÄ –î–µ–ø–ª–æ–π backend (—á–µ—Ä–µ–∑ PR –≤ `main`)

#### `deploy` (environment: `deploy`)

-   –õ–æ–≥–∏–Ω –≤ GHCR\
-   –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ kubeconfig –∏–∑ —Å–µ–∫—Ä–µ—Ç–∞\
-   –£—Å—Ç–∞–Ω–æ–≤–∫–∞/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–ª–∏–∑–∞ —á–µ—Ä–µ–∑ Helm\
-   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–µ—Ä—Å–∏—è –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `BACKEND_VERSION`\
-   –õ–æ–≥ Helm –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º –≤ PR

------------------------------------------------------------------------

## üåê Frontend --- —Å–±–æ—Ä–∫–∞ –∏ –¥–µ–ø–ª–æ–π

**–§–∞–π–ª:** `.github/workflows/frontend-action.yml`

  –°–æ–±—ã—Ç–∏–µ   –í–µ—Ç–∫–∞       –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
  --------- ----------- ------------------------------------------
  Push      `develop`   –¢–µ—Å—Ç—ã ‚Üí —Å–±–æ—Ä–∫–∞ ‚Üí –ø—É–±–ª–∏–∫–∞—Ü–∏—è ‚Üí Helm chart
  PR        –≤ `main`    –¢–µ—Å—Ç—ã ‚Üí –æ–∂–∏–¥–∞–Ω–∏–µ —Ä—É—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è

### üîπ –û—Å–Ω–æ–≤–Ω—ã–µ —ç—Ç–∞–ø—ã

#### 1Ô∏è‚É£ `test_frontend`

-   –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js\
-   `npm ci`\
-   –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

#### 2Ô∏è‚É£ `build_and_push`

-   –°–±–æ—Ä–∫–∞ Docker-–æ–±—Ä–∞–∑–∞\
-   –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ GHCR (`frontend:<version>` –∏ `latest`)

#### 3Ô∏è‚É£ `helm_chart`

-   Helm lint\
-   –ü–∞–∫–µ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ chart\
-   –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ GHCR

### üöÄ –î–µ–ø–ª–æ–π frontend

-   –ß–µ—Ä–µ–∑ PR –≤ `main`\
-   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `FRONTEND_VERSION`\
-   Helm upgrade —Å –ª–æ–≥–æ–º –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ PR

------------------------------------------------------------------------

## üìä Monitoring --- Helm chart

**–§–∞–π–ª:** `.github/workflows/monitoring-action.yml`

### üîπ –ö–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

-   Push –≤ `develop` –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤:

        infrastructure/helm/monitoring/**

### üîπ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç

-   Helm lint\
-   –ü–∞–∫—É–µ—Ç chart —Å –≤–µ—Ä—Å–∏–µ–π `0.0.<run_number>`\
-   –ü—É–±–ª–∏–∫—É–µ—Ç –≤ GHCR –∫–∞–∫ OCI chart

------------------------------------------------------------------------

## üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–í–æ –≤—Å–µ—Ö –∫–ª—é—á–µ–≤—ã—Ö workflow –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ **Telegram**: -
—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–±–æ—Ä–æ–∫\
- Terraform plan/apply\
- –æ–∂–∏–¥–∞–Ω–∏–µ —Ä—É—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–ª–µ–¥–∏—Ç—å –∑–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º CI/CD –±–µ–∑ –∑–∞—Ö–æ–¥–∞ –≤ GitHub Actions.

---

## üîê Secrets –∏ Variables

–ù–∏–∂–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã –≤—Å–µ **GitHub Secrets** –∏ **Environment Variables**,
–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤ CI/CD.

–î–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤:\
**Repository ‚Üí Settings ‚Üí Secrets and variables ‚Üí Actions**

------------------------------------------------------------------------

## ‚òÅÔ∏è Yandex Cloud (Terraform + Kubernetes)

–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ `terraform-action.yml` –∏ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ —á–µ—Ä–µ–∑ Helm.

  -----------------------------------------------------------------------------------
  Secret                      –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è                    –û–ø–∏—Å–∞–Ω–∏–µ
  --------------------------- ----------------------------------- -------------------
  `YC_SA_KEY_JSON`            Terraform                           JSON –∫–ª—é—á
                                                                  —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
                                                                  Yandex Cloud

  `YC_CLOUD_ID`               Terraform                           ID –æ–±–ª–∞–∫–∞ Yandex
                                                                  Cloud

  `YC_FOLDER_ID`              Terraform                           ID –∫–∞—Ç–∞–ª–æ–≥–∞

  `YC_S3_ACCESS_KEY_ID`       Terraform backend                   Access key –¥–ª—è
                                                                  Object Storage (S3)

  `YC_S3_SECRET_ACCESS_KEY`   Terraform backend                   Secret key –¥–ª—è
                                                                  Object Storage
  -----------------------------------------------------------------------------------

------------------------------------------------------------------------

## ‚ò∏Ô∏è Kubernetes

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –¥–µ–ø–ª–æ–µ backend –∏ frontend —á–µ—Ä–µ–∑ Helm.

  --------------------------------------------------------------------------
  Secret             –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è                    –û–ø–∏—Å–∞–Ω–∏–µ
  ------------------ ----------------------------------- -------------------
  `KUBECONFIG_B64`   Backend / Frontend deploy           kubeconfig,
                                                         –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤
                                                         base64

  --------------------------------------------------------------------------

–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å:

``` bash
cat ~/.kube/config | base64 -w 0
```

------------------------------------------------------------------------

## üì¶ GitHub Container Registry (GHCR)

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è: - Docker-–æ–±—Ä–∞–∑–æ–≤ (`backend`, `frontend`) - Helm charts
(`backend`, `frontend`, `monitoring`)

  ------------------------------------------------------------------------
  Secret           –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è                    –û–ø–∏—Å–∞–Ω–∏–µ
  ---------------- ----------------------------------- -------------------
  `GITHUB_TOKEN`   –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π                          –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
                                                       –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è
                                                       GitHub Actions
                                                       (–æ—Ç–¥–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å
                                                       –Ω–µ –Ω—É–∂–Ω–æ)

  ------------------------------------------------------------------------

------------------------------------------------------------------------

## üí¨ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–æ—á—Ç–∏ –≤–æ –≤—Å–µ—Ö workflow.

  ------------------------------------------------------------------------------
  Secret                 –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è                    –û–ø–∏—Å–∞–Ω–∏–µ
  ---------------------- ----------------------------------- -------------------
  `TELEGRAM_BOT_TOKEN`   –í—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è                     –¢–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞

  `TELEGRAM_CHAT_ID`     –í—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è                     ID —á–∞—Ç–∞/–∫–∞–Ω–∞–ª–∞ –¥–ª—è
                                                             —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
  ------------------------------------------------------------------------------

------------------------------------------------------------------------

## üöÄ Environment Variables (Deploy)

–î–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤\
**Settings ‚Üí Environments ‚Üí `deploy`**

### Backend

  -----------------------------------------------------------------------
  Variable                            –û–ø–∏—Å–∞–Ω–∏–µ
  ----------------------------------- -----------------------------------
  `BACKEND_VERSION`                   –í–µ—Ä—Å–∏—è Helm-—á–∞—Ä—Ç–∞ –∏ Docker-–æ–±—Ä–∞–∑–∞
                                      backend –¥–ª—è –¥–µ–ø–ª–æ—è

  -----------------------------------------------------------------------

### Frontend

  -----------------------------------------------------------------------
  Variable                            –û–ø–∏—Å–∞–Ω–∏–µ
  ----------------------------------- -----------------------------------
  `FRONTEND_VERSION`                  –í–µ—Ä—Å–∏—è Helm-—á–∞—Ä—Ç–∞ –∏ Docker-–æ–±—Ä–∞–∑–∞
                                      frontend –¥–ª—è –¥–µ–ø–ª–æ—è

  -----------------------------------------------------------------------

------------------------------------------------------------------------

## üß† –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–µ—Ä—Å–∏—è—Ü–∏—è

–ü—Ä–∏ push –≤ `develop`:

  –°–µ—Ä–≤–∏—Å       –§–æ—Ä–º–∞—Ç –≤–µ—Ä—Å–∏–∏
  ------------ --------------------
  Backend      `1.0.<run_number>`
  Frontend     `1.<run_number>.0`
  Monitoring   `0.0.<run_number>`

–≠—Ç–∏ –≤–µ—Ä—Å–∏–∏: 1. –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–∞–∫ —Ç–µ–≥ Docker-–æ–±—Ä–∞–∑–∞\
2. –ü—Ä–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –∫–∞–∫ –≤–µ—Ä—Å–∏—è Helm-—á–∞—Ä—Ç–∞\
3. –ü–æ—Ç–æ–º –≤—Ä—É—á–Ω—É—é —É–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ `BACKEND_VERSION` / `FRONTEND_VERSION`
–ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

------------------------------------------------------------------------

## ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –Ω–∞–±–æ—Ä –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –±—ã—Å—Ç—Ä–æ:

-   `YC_SA_KEY_JSON`
-   `YC_CLOUD_ID`
-   `YC_FOLDER_ID`
-   `YC_S3_ACCESS_KEY_ID`
-   `YC_S3_SECRET_ACCESS_KEY`
-   `KUBECONFIG_B64`
-   `TELEGRAM_BOT_TOKEN`
-   `TELEGRAM_CHAT_ID`
-   `BACKEND_VERSION` (env)
-   `FRONTEND_VERSION` (env)

---

## üöÄ –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (Docker compose)

### 1Ô∏è‚É£ –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

```bash
git clone https://github.com/MonstroKosilka/final.git
cd final
```

---

### 2Ô∏è‚É£ –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

```bash
docker compose up -d --build
```

Docker –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

* —Å–æ–±–µ—Ä—ë—Ç backend –∏ frontend
* –ø–æ–¥–Ω–∏–º–µ—Ç monitoring‚Äëstack
* —Å–æ–∑–¥–∞—Å—Ç volumes –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

#### –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ

```bash
docker-compose-latest.yaml
```
–ü–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–∏ –≤–µ—Ä—Å–∏–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ backend –∏ frontend, –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ GitHub

---

### 3Ô∏è‚É£ –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

| –°–µ—Ä–≤–∏—Å      | URL                                            | –û–ø–∏—Å–∞–Ω–∏–µ       |
| ----------- | ---------------------------------------------- | -------------- |
| Frontend    | [http://localhost:8080](http://localhost:8080) | Web UI         |
| Backend API | [http://localhost:8081](http://localhost:8081) | REST API       |
| Prometheus  | [http://localhost:9090](http://localhost:9090) | –ú–µ—Ç—Ä–∏–∫–∏        |
| Grafana     | [http://localhost:3000](http://localhost:3000) | UI –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ |
| Loki API    | [http://localhost:3100](http://localhost:3100) | –õ–æ–≥–∏           |

Grafana –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:

```
login: admin
password: admin
```

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ (Prometheus)

Backend —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –ø–æ –∞–¥—Ä–µ—Å—É:

```
GET /metrics
```

Prometheus –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–∏—Ä–∞–µ—Ç –∏—Ö –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥.

–ü—Ä–æ–≤–µ—Ä–∫–∞:

* Prometheus ‚Üí **Status ‚Üí Targets**
* backend –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ **UP**

---

## üßæ –õ–æ–≥–∏ (Loki + Promtail)

Promtail —Å–æ–±–∏—Ä–∞–µ—Ç docker‚Äë–ª–æ–≥–∏ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –≤ Loki.

–õ–æ–≥–∏ —Ä–∞–∑–º–µ—á–µ–Ω—ã label‚Äë–æ–º:

```
app = backend | frontend
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

Grafana ‚Üí **Explore ‚Üí Loki**

–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤:

```logql
{app="backend"}
```

```logql
{app="frontend"}
```

```logql
{app="backend", level="error"}
```

---

## üßπ –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
docker compose down
```

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ Yandex Cloud

#### –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ 

–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–ª–∞—Å—Ç–µ—Ä–µ minikube –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ

